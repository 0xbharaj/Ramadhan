<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan 2026 · Wajir, Kenya</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ── Custom Properties / Theming ── */
        :root {
            --bg: #FAF7F2;
            --surface: #FFFFFF;
            --surface-alt: #F0EDE6;
            --text: #1A1A2E;
            --text-muted: #6B7280;
            --primary: #0C4B33;
            --primary-light: #157A56;
            --accent: #C8A951;
            --accent-light: #E8D48B;
            --hero-from: #0A1929;
            --hero-to: #0C4B33;
            --border: #E5E1D8;
            --highlight-bg: #E8F5E9;
            --highlight-border: #4CAF50;
            --last10-bg: #FFF8E1;
            --last10-border: #C8A951;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --shadow-lg: 0 12px 48px rgba(0,0,0,0.12);
            --radius: 16px;
            --radius-sm: 10px;
            --transition: 0.3s ease;
        }

        [data-theme="dark"] {
            --bg: #0A1628;
            --surface: #132238;
            --surface-alt: #1A2D47;
            --text: #E8E6E1;
            --text-muted: #8B95A5;
            --primary: #2ECC71;
            --primary-light: #4ADE80;
            --border: #1E3A5F;
            --highlight-bg: #1A3A2A;
            --highlight-border: #4ADE80;
            --last10-bg: #2A2518;
            --last10-border: #E8D48B;
            --shadow: 0 4px 24px rgba(0,0,0,0.25);
            --shadow-lg: 0 12px 48px rgba(0,0,0,0.4);
        }

        /* ── Reset & Base ── */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background var(--transition), color var(--transition);
            overflow-x: hidden;
        }

        /* ── Hero Section ── */
        .hero {
            background: linear-gradient(135deg, var(--hero-from) 0%, var(--hero-to) 100%);
            color: #fff;
            padding: 3rem 1.5rem 4rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background:
                radial-gradient(circle at 20% 50%, rgba(200, 169, 81, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(46, 204, 113, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Geometric pattern overlay */
        .hero::after {
            content: '';
            position: absolute;
            inset: 0;
            opacity: 0.04;
            background-image:
                linear-gradient(30deg, #fff 12%, transparent 12.5%, transparent 87%, #fff 87.5%, #fff),
                linear-gradient(150deg, #fff 12%, transparent 12.5%, transparent 87%, #fff 87.5%, #fff),
                linear-gradient(30deg, #fff 12%, transparent 12.5%, transparent 87%, #fff 87.5%, #fff),
                linear-gradient(150deg, #fff 12%, transparent 12.5%, transparent 87%, #fff 87.5%, #fff),
                linear-gradient(60deg, rgba(255,255,255,0.6) 25%, transparent 25.5%, transparent 75%, rgba(255,255,255,0.6) 75%),
                linear-gradient(60deg, rgba(255,255,255,0.6) 25%, transparent 25.5%, transparent 75%, rgba(255,255,255,0.6) 75%);
            background-size: 80px 140px;
            background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px;
            pointer-events: none;
        }

        .hero-content { position: relative; z-index: 1; max-width: 700px; margin: 0 auto; }

        /* Crescent Moon */
        .crescent {
            width: 64px;
            height: 64px;
            margin: 0 auto 1.2rem;
            position: relative;
            animation: gentle-glow 3s ease-in-out infinite;
        }

        .crescent::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #C8A951;
            box-shadow: 0 0 30px rgba(200, 169, 81, 0.4), 0 0 60px rgba(200, 169, 81, 0.2);
        }

        .crescent::after {
            content: '';
            position: absolute;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--hero-from);
            top: -2px;
            left: 14px;
        }

        /* Stars */
        .stars {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #C8A951;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite alternate;
        }

        .star:nth-child(1) { top: 15%; left: 10%; animation-delay: 0s; }
        .star:nth-child(2) { top: 25%; left: 85%; animation-delay: 0.5s; width: 2px; height: 2px; }
        .star:nth-child(3) { top: 10%; left: 60%; animation-delay: 1s; }
        .star:nth-child(4) { top: 40%; left: 20%; animation-delay: 1.5s; width: 2px; height: 2px; }
        .star:nth-child(5) { top: 20%; left: 40%; animation-delay: 0.3s; }
        .star:nth-child(6) { top: 35%; left: 75%; animation-delay: 0.8s; width: 2px; height: 2px; }
        .star:nth-child(7) { top: 50%; left: 5%; animation-delay: 1.2s; }
        .star:nth-child(8) { top: 8%; left: 30%; animation-delay: 0.6s; width: 2px; height: 2px; }

        @keyframes twinkle {
            from { opacity: 0.3; transform: scale(1); }
            to   { opacity: 1;   transform: scale(1.3); }
        }

        @keyframes gentle-glow {
            0%, 100% { filter: drop-shadow(0 0 8px rgba(200, 169, 81, 0.3)); }
            50%      { filter: drop-shadow(0 0 20px rgba(200, 169, 81, 0.5)); }
        }

        .hero h1 {
            font-family: 'Amiri', serif;
            font-size: clamp(2rem, 5vw, 3.2rem);
            font-weight: 700;
            letter-spacing: 0.02em;
            margin-bottom: 0.3rem;
        }

        .hero .location {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 6px 18px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255,255,255,0.15);
        }

        .hero .location svg { width: 14px; height: 14px; fill: #C8A951; }

        .hero .verse {
            font-family: 'Amiri', serif;
            font-style: italic;
            font-size: 1rem;
            opacity: 0.75;
            max-width: 500px;
            margin: 1.2rem auto 0;
            line-height: 1.7;
        }

        /* ── Countdown ── */
        .countdown-section {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .countdown-unit {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 14px;
            padding: 14px 10px;
            min-width: 80px;
            text-align: center;
        }

        .countdown-unit .number {
            font-family: 'Inter', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            line-height: 1;
            color: #C8A951;
        }

        .countdown-unit .label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            opacity: 0.7;
            margin-top: 6px;
        }

        .countdown-message {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            color: #C8A951;
            margin-top: 1.5rem;
        }

        /* ── Main Content ── */
        .main {
            max-width: 900px;
            margin: -2rem auto 0;
            padding: 0 1rem 3rem;
            position: relative;
            z-index: 2;
        }

        /* ── Today Card ── */
        .today-card {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
            transition: background var(--transition), border var(--transition);
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .today-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .today-card .card-title {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .today-card .day-badge {
            background: var(--primary);
            color: #fff;
            padding: 5px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .times-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .time-block {
            background: var(--surface-alt);
            border-radius: var(--radius-sm);
            padding: 1.25rem;
            text-align: center;
            transition: background var(--transition);
        }

        .time-block .time-label {
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .time-block .time-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1.2;
        }

        .time-block .time-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .time-block.iftar-block { border-bottom: 3px solid var(--accent); }
        .time-block.suhoor-block { border-bottom: 3px solid var(--primary); }

        /* Next event countdown inside today card */
        .next-event {
            text-align: center;
            margin-top: 1.25rem;
            padding: 0.75rem;
            background: var(--surface-alt);
            border-radius: var(--radius-sm);
            font-weight: 500;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .next-event strong {
            color: var(--primary);
        }

        /* ── Progress Bar ── */
        .progress-section {
            margin-bottom: 2rem;
            animation: slideUp 0.7s ease-out;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .progress-header span {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--surface-alt);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            transition: width 1s ease-out;
        }

        /* ── Controls: Search + Theme Toggle ── */
        .controls {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            align-items: center;
            animation: slideUp 0.8s ease-out;
        }

        .search-wrap {
            flex: 1;
            position: relative;
        }

        .search-wrap svg {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            fill: var(--text-muted);
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 12px 14px 12px 42px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            font-size: 0.95rem;
            font-family: inherit;
            outline: none;
            transition: border var(--transition), background var(--transition), box-shadow var(--transition);
        }

        .search-input::placeholder { color: var(--text-muted); opacity: 0.7; }
        .search-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(12, 75, 51, 0.1); }

        [data-theme="dark"] .search-input:focus { box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.15); }

        .theme-toggle {
            width: 46px;
            height: 46px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition);
            flex-shrink: 0;
        }

        .theme-toggle:hover { border-color: var(--primary); background: var(--surface-alt); }
        .theme-toggle svg { width: 20px; height: 20px; fill: currentColor; }

        /* ── Table ── */
        .table-wrapper {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid var(--border);
            transition: background var(--transition), border var(--transition);
            animation: slideUp 0.9s ease-out;
        }

        .table-scroll { overflow-x: auto; }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.92rem;
        }

        thead th {
            background: var(--primary);
            color: #fff;
            padding: 14px 16px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.08em;
            position: sticky;
            top: 0;
            white-space: nowrap;
        }

        thead th:first-child { border-radius: 0; }
        thead th:last-child  { border-radius: 0; }

        tbody tr {
            transition: background var(--transition);
        }

        tbody td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            text-align: center;
            white-space: nowrap;
        }

        tbody tr:last-child td { border-bottom: none; }

        tbody tr:hover {
            background: var(--surface-alt);
        }

        /* Day number column */
        tbody td:first-child {
            font-weight: 700;
            color: var(--primary);
        }

        /* Today's row */
        tbody tr.today-row {
            background: var(--highlight-bg);
            border-left: 4px solid var(--highlight-border);
        }

        tbody tr.today-row td:first-child {
            padding-left: 12px;
        }

        .today-label {
            display: inline-block;
            background: var(--highlight-border);
            color: #fff;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-left: 6px;
            vertical-align: middle;
        }

        /* Last 10 nights */
        tbody tr.last-ten {
            background: var(--last10-bg);
        }

        tbody tr.last-ten td:first-child::after {
            content: ' ';
        }

        .night-badge {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            margin-left: 4px;
            vertical-align: middle;
        }

        /* Fasting duration column */
        .duration {
            font-weight: 500;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* ── Legend ── */
        .legend {
            display: flex;
            gap: 1.5rem;
            margin-top: 1rem;
            padding: 1rem 1.5rem;
            font-size: 0.8rem;
            color: var(--text-muted);
            flex-wrap: wrap;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-dot {
            width: 10px; height: 10px; border-radius: 50%;
        }

        .legend-dot.today-dot { background: var(--highlight-border); }
        .legend-dot.last10-dot { background: var(--accent); }

        /* ── Footer ── */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            font-size: 0.8rem;
            color: var(--text-muted);
            max-width: 900px;
            margin: 0 auto;
        }

        .footer a {
            color: var(--primary);
            text-decoration: none;
        }

        .footer .bismi {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        /* ── Scroll to top button ── */
        .scroll-top {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--primary);
            color: #fff;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s, transform 0.3s;
            z-index: 100;
        }

        .scroll-top.visible { opacity: 1; transform: translateY(0); }
        .scroll-top:hover { background: var(--primary-light); }
        .scroll-top svg { width: 20px; height: 20px; fill: #fff; }

        /* ── No results ── */
        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
            display: none;
        }

        /* ── Print Styles ── */
        @media print {
            .hero { padding: 1.5rem; }
            .hero::before, .hero::after, .stars { display: none; }
            .countdown-section, .theme-toggle, .scroll-top, .controls { display: none !important; }
            .today-card { box-shadow: none; border: 1px solid #ccc; }
            .table-wrapper { box-shadow: none; }
            body { background: #fff; }
        }

        /* ── Responsive ── */
        @media (max-width: 600px) {
            .hero { padding: 2rem 1rem 3rem; }
            .hero h1 { font-size: 1.8rem; }
            .countdown-unit { min-width: 65px; padding: 10px 6px; }
            .countdown-unit .number { font-size: 1.5rem; }
            .times-grid { grid-template-columns: 1fr 1fr; gap: 0.75rem; }
            .time-block .time-value { font-size: 1.4rem; }
            .main { padding: 0 0.75rem 2rem; }
            table { font-size: 0.82rem; }
            thead th, tbody td { padding: 10px 8px; }
            .today-card { padding: 1.25rem; }
        }

        @media (max-width: 400px) {
            .times-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- ════════════════════ HERO ════════════════════ -->
<header class="hero">
    <div class="stars">
        <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span>
        <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span>
    </div>
    <div class="hero-content">
        <div class="crescent"></div>
        <h1>Ramadan 2026</h1>
        <div class="location">
            <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
            Wajir, Kenya
        </div>

        <div id="countdown-container">
            <div class="countdown-section" id="countdown-units">
                <div class="countdown-unit"><div class="number" id="cd-days">--</div><div class="label">Days</div></div>
                <div class="countdown-unit"><div class="number" id="cd-hours">--</div><div class="label">Hours</div></div>
                <div class="countdown-unit"><div class="number" id="cd-mins">--</div><div class="label">Minutes</div></div>
                <div class="countdown-unit"><div class="number" id="cd-secs">--</div><div class="label">Seconds</div></div>
            </div>
            <div class="countdown-message" id="countdown-msg" style="display:none;"></div>
        </div>

        <p class="verse">"The month of Ramadan in which was revealed the Quran, a guidance for mankind and clear proofs of guidance and criterion." — Al-Baqarah 2:185</p>
    </div>
</header>

<!-- ════════════════════ MAIN ════════════════════ -->
<main class="main">

    <!-- Today's Card -->
    <section class="today-card" id="today-card" style="display:none;">
        <div class="card-header">
            <div class="card-title" id="today-title">Today's Schedule</div>
            <div class="day-badge" id="today-badge">Day 1 of 30</div>
        </div>
        <div class="times-grid">
            <div class="time-block suhoor-block">
                <div class="time-label">Suhoor ends</div>
                <div class="time-value" id="today-suhoor">--:--</div>
                <div class="time-note">Stop eating before Fajr</div>
            </div>
            <div class="time-block iftar-block">
                <div class="time-label">Iftar</div>
                <div class="time-value" id="today-iftar">--:--</div>
                <div class="time-note">Break your fast at Maghrib</div>
            </div>
        </div>
        <div class="next-event" id="next-event"></div>
    </section>

    <!-- Progress -->
    <section class="progress-section" id="progress-section" style="display:none;">
        <div class="progress-header">
            <span id="progress-label">Ramadan Progress</span>
            <span id="progress-pct">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width:0%"></div>
        </div>
    </section>

    <!-- Controls -->
    <div class="controls">
        <div class="search-wrap">
            <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            <input type="text" class="search-input" id="dateSearch" onkeyup="filterTable()" placeholder="Search by date or day number...">
        </div>
        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle dark mode">
            <svg id="icon-sun" viewBox="0 0 24 24" style="display:none;"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/></svg>
            <svg id="icon-moon" viewBox="0 0 24 24"><path d="M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/></svg>
        </button>
    </div>

    <!-- Table -->
    <div class="table-wrapper">
        <div class="table-scroll">
            <table id="ramadanTable">
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Date</th>
                        <th>Suhoor</th>
                        <th>Iftar</th>
                        <th>Fasting</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
        <div class="no-results" id="noResults">No matching dates found.</div>
        <div class="legend">
            <div class="legend-item"><span class="legend-dot today-dot"></span> Today</div>
            <div class="legend-item"><span class="legend-dot last10-dot"></span> Last 10 Nights</div>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="bismi">&#65010;</div>
    <p>Prayer times are approximate for Wajir, Kenya (1.75°N, 40.06°E).<br>
    Please verify with your local mosque. Ramadan Kareem!</p>
</footer>

<!-- Scroll to Top -->
<button class="scroll-top" id="scrollTop" onclick="scrollToTop()">
    <svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</button>

<script>
(function () {
    /* ── Ramadan 2026 Data for Wajir, Kenya ── */
    const schedule = [
        { day: 1,  date: "Feb 19", suhoor: "5:22 AM", iftar: "6:36 PM" },
        { day: 2,  date: "Feb 20", suhoor: "5:22 AM", iftar: "6:36 PM" },
        { day: 3,  date: "Feb 21", suhoor: "5:21 AM", iftar: "6:36 PM" },
        { day: 4,  date: "Feb 22", suhoor: "5:21 AM", iftar: "6:36 PM" },
        { day: 5,  date: "Feb 23", suhoor: "5:21 AM", iftar: "6:35 PM" },
        { day: 6,  date: "Feb 24", suhoor: "5:20 AM", iftar: "6:35 PM" },
        { day: 7,  date: "Feb 25", suhoor: "5:20 AM", iftar: "6:35 PM" },
        { day: 8,  date: "Feb 26", suhoor: "5:20 AM", iftar: "6:35 PM" },
        { day: 9,  date: "Feb 27", suhoor: "5:19 AM", iftar: "6:35 PM" },
        { day: 10, date: "Feb 28", suhoor: "5:19 AM", iftar: "6:34 PM" },
        { day: 11, date: "Mar 1",  suhoor: "5:19 AM", iftar: "6:34 PM" },
        { day: 12, date: "Mar 2",  suhoor: "5:18 AM", iftar: "6:34 PM" },
        { day: 13, date: "Mar 3",  suhoor: "5:18 AM", iftar: "6:34 PM" },
        { day: 14, date: "Mar 4",  suhoor: "5:18 AM", iftar: "6:33 PM" },
        { day: 15, date: "Mar 5",  suhoor: "5:17 AM", iftar: "6:33 PM" },
        { day: 16, date: "Mar 6",  suhoor: "5:17 AM", iftar: "6:33 PM" },
        { day: 17, date: "Mar 7",  suhoor: "5:17 AM", iftar: "6:33 PM" },
        { day: 18, date: "Mar 8",  suhoor: "5:16 AM", iftar: "6:32 PM" },
        { day: 19, date: "Mar 9",  suhoor: "5:16 AM", iftar: "6:32 PM" },
        { day: 20, date: "Mar 10", suhoor: "5:16 AM", iftar: "6:32 PM" },
        { day: 21, date: "Mar 11", suhoor: "5:15 AM", iftar: "6:32 PM" },
        { day: 22, date: "Mar 12", suhoor: "5:15 AM", iftar: "6:31 PM" },
        { day: 23, date: "Mar 13", suhoor: "5:15 AM", iftar: "6:31 PM" },
        { day: 24, date: "Mar 14", suhoor: "5:14 AM", iftar: "6:31 PM" },
        { day: 25, date: "Mar 15", suhoor: "5:14 AM", iftar: "6:31 PM" },
        { day: 26, date: "Mar 16", suhoor: "5:14 AM", iftar: "6:30 PM" },
        { day: 27, date: "Mar 17", suhoor: "5:13 AM", iftar: "6:30 PM" },
        { day: 28, date: "Mar 18", suhoor: "5:13 AM", iftar: "6:30 PM" },
        { day: 29, date: "Mar 19", suhoor: "5:13 AM", iftar: "6:30 PM" },
        { day: 30, date: "Mar 20", suhoor: "5:12 AM", iftar: "6:29 PM" }
    ];

    /* ── Helper: parse "5:22 AM" into total minutes from midnight ── */
    function parseTime(str) {
        const [time, period] = str.split(' ');
        let [h, m] = time.split(':').map(Number);
        if (period === 'PM' && h !== 12) h += 12;
        if (period === 'AM' && h === 12) h = 0;
        return h * 60 + m;
    }

    /* ── Helper: compute fasting duration ── */
    function fastingDuration(suhoor, iftar) {
        const s = parseTime(suhoor);
        const e = parseTime(iftar);
        const diff = e - s;
        const hrs = Math.floor(diff / 60);
        const mins = diff % 60;
        return hrs + 'h ' + (mins > 0 ? mins + 'm' : '');
    }

    /* ── Helper: parse schedule date into a JS Date (year 2026) ── */
    function parseScheduleDate(dateStr) {
        return new Date(dateStr + ', 2026');
    }

    /* ── Detect today's entry ── */
    function getTodayEntry() {
        const now = new Date();
        const todayStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        return schedule.find(e => {
            const d = parseScheduleDate(e.date);
            return d.getDate() === now.getDate() &&
                   d.getMonth() === now.getMonth() &&
                   d.getFullYear() === now.getFullYear();
        });
    }

    /* ── Build Table ── */
    const tbody = document.getElementById('tableBody');
    const todayEntry = getTodayEntry();

    schedule.forEach(entry => {
        const tr = document.createElement('tr');
        const isToday = todayEntry && todayEntry.day === entry.day;
        const isLast10 = entry.day >= 21;

        if (isToday) tr.classList.add('today-row');
        else if (isLast10) tr.classList.add('last-ten');

        const duration = fastingDuration(entry.suhoor, entry.iftar);

        tr.innerHTML = `
            <td>${entry.day}${isLast10 && !isToday ? '<span class="night-badge"></span>' : ''}${isToday ? '<span class="today-label">Today</span>' : ''}</td>
            <td>${entry.date}</td>
            <td>${entry.suhoor}</td>
            <td>${entry.iftar}</td>
            <td class="duration">${duration}</td>
        `;

        tr.setAttribute('data-search', (entry.date + ' ' + entry.day).toUpperCase());
        tbody.appendChild(tr);
    });

    /* ── Today Card ── */
    if (todayEntry) {
        document.getElementById('today-card').style.display = '';
        document.getElementById('today-title').textContent = todayEntry.date + ', 2026';
        document.getElementById('today-badge').textContent = 'Day ' + todayEntry.day + ' of 30';
        document.getElementById('today-suhoor').textContent = todayEntry.suhoor;
        document.getElementById('today-iftar').textContent = todayEntry.iftar;

        /* scroll to today's row */
        setTimeout(() => {
            const row = document.querySelector('.today-row');
            if (row) row.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 800);
    }

    /* ── Progress Bar ── */
    const ramadanStartDate = new Date('Feb 19, 2026');
    const ramadanEndDate = new Date('Mar 21, 2026');
    const now = new Date();

    if (now >= ramadanStartDate && now <= ramadanEndDate) {
        document.getElementById('progress-section').style.display = '';
        const total = (ramadanEndDate - ramadanStartDate);
        const elapsed = (now - ramadanStartDate);
        const pct = Math.min(100, Math.max(0, (elapsed / total) * 100));
        document.getElementById('progress-fill').style.width = pct.toFixed(1) + '%';
        document.getElementById('progress-pct').textContent = Math.round(pct) + '%';
        if (todayEntry) {
            document.getElementById('progress-label').textContent = 'Day ' + todayEntry.day + ' of 30';
        }
    }

    /* ── Countdown ── */
    const ramadanStart = new Date("Feb 18, 2026 18:30:00").getTime();
    const unitsEl = document.getElementById('countdown-units');
    const msgEl = document.getElementById('countdown-msg');

    function updateCountdown() {
        const now = Date.now();
        const distance = ramadanStart - now;

        if (distance < 0 && now < ramadanEndDate.getTime()) {
            /* During Ramadan */
            unitsEl.style.display = 'none';
            msgEl.style.display = '';
            msgEl.textContent = 'Ramadan Kareem!';

            /* Next event countdown */
            if (todayEntry) {
                updateNextEvent(todayEntry);
            }
        } else if (now >= ramadanEndDate.getTime()) {
            /* After Ramadan */
            unitsEl.style.display = 'none';
            msgEl.style.display = '';
            msgEl.textContent = 'Eid Mubarak!';
        } else {
            /* Before Ramadan */
            const d = Math.floor(distance / 86400000);
            const h = Math.floor((distance % 86400000) / 3600000);
            const m = Math.floor((distance % 3600000) / 60000);
            const s = Math.floor((distance % 60000) / 1000);

            document.getElementById('cd-days').textContent = String(d).padStart(2, '0');
            document.getElementById('cd-hours').textContent = String(h).padStart(2, '0');
            document.getElementById('cd-mins').textContent = String(m).padStart(2, '0');
            document.getElementById('cd-secs').textContent = String(s).padStart(2, '0');
        }
    }

    function updateNextEvent(entry) {
        const el = document.getElementById('next-event');
        if (!el) return;

        const now = new Date();
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

        const suhoorMins = parseTime(entry.suhoor);
        const iftarMins = parseTime(entry.iftar);
        const nowMins = now.getHours() * 60 + now.getMinutes();

        if (nowMins < suhoorMins) {
            const diff = suhoorMins - nowMins;
            const h = Math.floor(diff / 60);
            const m = diff % 60;
            el.innerHTML = '<strong>' + h + 'h ' + m + 'm</strong> until Suhoor ends';
        } else if (nowMins < iftarMins) {
            const diff = iftarMins - nowMins;
            const h = Math.floor(diff / 60);
            const m = diff % 60;
            el.innerHTML = '<strong>' + h + 'h ' + m + 'm</strong> until Iftar';
        } else {
            el.innerHTML = 'Fasting complete for today — <strong>Alhamdulillah!</strong>';
        }
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    /* ── Search Filter ── */
    window.filterTable = function () {
        const filter = document.getElementById('dateSearch').value.toUpperCase().trim();
        const rows = tbody.querySelectorAll('tr');
        let visible = 0;

        rows.forEach(row => {
            const data = row.getAttribute('data-search') || '';
            const match = !filter || data.indexOf(filter) > -1;
            row.style.display = match ? '' : 'none';
            if (match) visible++;
        });

        document.getElementById('noResults').style.display = visible === 0 ? '' : 'none';
    };

    /* ── Dark Mode ── */
    const savedTheme = localStorage.getItem('ramadan-theme');
    if (savedTheme) setTheme(savedTheme);
    else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) setTheme('dark');

    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        document.getElementById('icon-sun').style.display = theme === 'dark' ? '' : 'none';
        document.getElementById('icon-moon').style.display = theme === 'dark' ? 'none' : '';
        localStorage.setItem('ramadan-theme', theme);
    }

    window.toggleTheme = function () {
        const current = document.documentElement.getAttribute('data-theme');
        setTheme(current === 'dark' ? 'light' : 'dark');
    };

    /* ── Scroll-to-Top Button ── */
    const scrollBtn = document.getElementById('scrollTop');
    window.addEventListener('scroll', () => {
        scrollBtn.classList.toggle('visible', window.scrollY > 400);
    });

    window.scrollToTop = function () {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };
})();
</script>

</body>
</html>
